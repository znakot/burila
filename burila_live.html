<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<title>Bakburila RSS Live</title>
<style>
    body { margin: 0; padding: 0; width: 1080px; height: 1920px; overflow: hidden; font-family: Arial, sans-serif; color: white; }
    #bgvideo { position: fixed; right: 0; bottom: 0; min-width: 100%; min-height: 100%; object-fit: cover; filter: brightness(0.35); z-index: -2; }
    .header { width: 100%; padding: 30px 0 20px 0; text-align: center; font-size: 62px; font-weight: 900; background: rgba(216, 0, 0, 0.9); letter-spacing: 4px; z-index: 10; position: relative; }
    .news-container { padding: 40px; height: 1500px; display: flex; align-items: center; justify-content: center; }
    .news { background: rgba(0,0,0,0.55); padding: 30px; border-left: 12px solid #ff2d2d; border-radius: 16px; font-size: 38px; line-height: 1.35; width: 100%; max-width: 950px; opacity: 0; position: absolute; transition: opacity 1.2s; }
    .news.active { opacity: 1; }
    .news img { width: 100%; max-height: 460px; object-fit: cover; border-radius: 14px; margin-bottom: 25px; }
    .ticker { position: absolute; bottom: 0; width: 100%; height: 110px; background: rgba(216,0,0,0.95); overflow: hidden; display: flex; align-items: center; z-index: 100; }
    .ticker p { white-space: nowrap; font-size: 46px; font-weight: bold; animation: scroll 18s linear infinite; color: #fff; padding-left: 100%; }
    @keyframes scroll { from { transform: translateX(0); } to { transform: translateX(-100%); } }
</style>
</head>
<body>
<video autoplay muted loop id="bgvideo"><source src="background.mp4" type="video/mp4"></video>
<div class="header">SON XƏBƏR:</div>
<div class="news-container">
    <div class="news active" id="news1"></div>
    <div class="news" id="news2"></div>
    <div class="news" id="news3"></div>
    <div class="news" id="news4"></div>
</div>
<div class="ticker"><p>XƏBƏRLƏR HƏR 10 DƏQİQƏDƏN BİR YENİLƏNİR! İZLƏ VƏ PAYLAŞ! — XƏBƏRLƏR HƏR 5 DƏQİQƏДӘN BİR YENİЛӘNІR! İZЛӘ VӘ PAYЛAŞ!</p></div>
<script>
const RSS_URL = "https://news.milli.az/rss/";
let newsData = [];
let slideIndex = 1;
const totalSlides = 4;
async function loadRSS() {
    try {
        const url = "https://api.allorigins.win/get?url=" + encodeURIComponent(RSS_URL);
        const response = await fetch(url);
        const data = await response.json();
        const parser = new DOMParser();
        const xml = parser.parseFromString(data.contents, "application/xml");
        const items = [...xml.querySelectorAll("item")].slice(0, 4);
        newsData = items.map(item => {
            let title = item.querySelector("title")?.textContent || "";
            let desc  = item.querySelector("description")?.textContent || "";
            let img = "";
            const media = item.getElementsByTagName("media:content");
            if (media.length > 0 && media[0].getAttribute("url")) img = media[0].getAttribute("url");
            const enc = item.querySelector("enclosure");
            if (!img && enc?.getAttribute("url")) img = enc.getAttribute("url");
            if (!img) {
                const match = desc.match(/<img[^>]+src="([^">]+)"/);
                if (match) img = match[1];
            }
            desc = desc.replace(/<[^>]+>/g, "");
            return { title, desc, img };
        });
        renderNews();
    } catch (e) { console.error("RSS yüklenə bilmədi:", e); }
}
function renderNews() {
    newsData.forEach((n, i) => {
        const box = document.getElementById("news" + (i + 1));
        box.innerHTML = `${n.img ? `<img src="${n.img}">` : ""}<b>${n.title}</b><br><br>${n.desc}`;
    });
}
setInterval(() => {
    for (let i = 1; i <= totalSlides; i++) document.getElementById("news" + i).classList.remove("active");
    slideIndex++; if (slideIndex > totalSlides) slideIndex = 1;
    document.getElementById("news" + slideIndex).classList.add("active");
}, 30000);
loadRSS();
setInterval(loadRSS, 120000);
</script>
</body>
</html>
